import { spawn, SpawnOptions, ChildProcess } from 'child_process'

export default function realtimeStdout(
  command: string,
  args: ReadonlyArray<string> = [],
  options: SpawnOptions = {},
  onStdout?: (data: string) => void
): ChildProcess {
  const cp = spawn(command, args, options)

  if (cp.stdout) {
    cp.stdout.on('data', data => {
      if (onStdout) {
        onStdout(data.toString())
      }
    })
  }

  return cp
}
